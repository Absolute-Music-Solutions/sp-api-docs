version: 1
frontend:
  phases:
    pre_build:
      commands:
        - cat >> shpinx_runner.py << EOF
if __name__ == "__main__":
    import sys

    try:
        import sphinx
    except ImportError:
        raise NameError("Cannot find sphinx in selected interpreter.")

    version = sphinx.version_info
    if (version[0] >= 1 and version[1] >= 7) or version[0] >= 2:
        from sphinx.cmd import build
        build.main(sys.argv[1:])
    else:
        from sphinx import cmdline
        cmdline.main(sys.argv)
          EOF
        - pip3 install -r requirements.txt
    build:
      commands:
        - python sphinx_runner.py -b dirhtml ./docs ./build

  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: ./build
    files:
      - '**/*'
  cache:
    paths: []

